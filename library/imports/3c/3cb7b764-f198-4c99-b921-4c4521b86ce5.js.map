{"version":3,"sources":["assets\\src\\ScoreMoving.js"],"names":["cc","Class","Component","properties","direction","speed","left","type","Node","right","up","down","changeTIme","perfectColor","Color","scoreLabel","Label","perfecteffect","onDestroy","systemEvent","off","onLoad","self","on","generateScore","start","parseInt","Math","random","hvtGenerate","randomTimer","notMoving","alreadyStop","log","perfectScore","globalData","consoScore","string","round","getScore","platformState","generateLast","lastDirection","update","dt","move","position","value","action","moveTo","currentAction","node","runAction","stopAll","stopAction","y","scheduleOnce","color","active","find","getComponent","playLandPerfect","playLandConso"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nimport * as globalData from \"GlobalData\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        direction: 0,\r\n        speed: 60,\r\n        left: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        right: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        up: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        down: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        changeTIme :0.5,\r\n\r\n        perfectColor:{\r\n            default:null,\r\n            type:cc.Color,\r\n        },\r\n\r\n        scoreLabel:{\r\n            default:null,\r\n            type:cc.Label,\r\n        },\r\n\r\n        perfecteffect:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onDestroy(){\r\n        //\r\n        cc.systemEvent.off(\"Change-Bet\");\r\n\r\n    },\r\n    onLoad () {\r\n        //this.generateScore();\r\n        var self =this;\r\n        cc.systemEvent.on(\"Change-Bet\", function() {\r\n            self.generateScore();\r\n            });\r\n\r\n    },\r\n\r\n    start() {\r\n        this.direction = parseInt(Math.random() * (3 + 1 - 0) + 0);\r\n        this.hvtGenerate = true;\r\n        this.randomTimer = 0;\r\n        this.notMoving = true;\r\n        this.alreadyStop = false;\r\n      \r\n    },\r\n\r\n\r\n    generateScore(){\r\n        if(!this.alreadyStop){\r\n            cc.log(\"HIHIHIHI\");\r\n            this.perfectScore = globalData.perfectScore;\r\n            this.consoScore = globalData.consoScore;\r\n            cc.log(this.perfectScore);\r\n            this.scoreLabel.string = Math.round(this.perfectScore * 10) / 10;\r\n            cc.log( this.scoreLabel.string+\"AKKA\");\r\n\r\n        }\r\n    },\r\n\r\n    getScore(platformState){\r\n        if(platformState==1){\r\n            return  this.perfectScore;\r\n\r\n        }\r\n        else{\r\n            return this.consoScore;\r\n        }\r\n    },\r\n    generateLast() {\r\n        this.lastDirection = this.direction;\r\n        this.hvtGenerate = false;\r\n\r\n    },\r\n    update(dt) {\r\n\r\n        if (!this.alreadyStop) {\r\n            this.randomTimer += dt;\r\n\r\n            if (this.randomTimer >= this.changeTIme) {\r\n                if (this.hvtGenerate) {\r\n                    this.generateLast();\r\n                }\r\n                if (this.direction == this.lastDirection) {\r\n                    this.direction = parseInt(Math.random() * (3 + 1 - 0) + 0);\r\n                }\r\n\r\n                if (this.direction != this.lastDirection) {\r\n                    this.hvtGenerate = true;\r\n                    this.randomTimer = 0;\r\n                    this.notMoving = true;\r\n                }\r\n            }\r\n\r\n            if (this.notMoving) {\r\n                if (this.direction == 0) {\r\n                    this.move(this.left.position);\r\n                }\r\n                else if (this.direction == 1) {\r\n                    this.move(this.right.position);\r\n                }\r\n\r\n                else if (this.direction == 2) {\r\n                    this.move(this.up.position);\r\n                }\r\n                else {\r\n                    this.move(this.down.position);\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    move(value) {\r\n        var action = cc.moveTo(this.changeTIme, value);\r\n        this.currentAction = action;\r\n        //this.node.x -= dt*this.speed;\r\n        this.node.runAction(this.currentAction);\r\n        this.notMoving = false;\r\n\r\n    },\r\n\r\n    stopAll(value,platformState) {\r\n        this.node.stopAction(this.currentAction);\r\n        this.alreadyStop = true;\r\n        if(platformState ==1){\r\n            value.y +=15;\r\n            var action = cc.moveTo(0.5,value);\r\n            this.node.runAction(action);\r\n            this.scheduleOnce(function(){\r\n                this.node.color = this.perfectColor;\r\n                this.perfecteffect.active =true;\r\n                this.scheduleOnce(function(){\r\n                    cc.find(\"Canvas/AudioManager\").getComponent(\"AudioManager\").playLandPerfect();\r\n\r\n                },0.1)\r\n\r\n            },0.5);\r\n        }\r\n\r\n        else{\r\n            var action = cc.moveTo(0.5,value);\r\n            this.node.runAction(action);\r\n            this.scheduleOnce(function(){\r\n                cc.find(\"Canvas/AudioManager\").getComponent(\"AudioManager\").playLandConso();\r\n\r\n            },0.5)\r\n        }\r\n    \r\n    },\r\n\r\n});\r\n"]}