{"version":3,"sources":["assets\\src\\utils\\Audio.ts"],"names":[],"mappings":";;;;;;AAAA;IAMI;QALQ,cAAS,GAAG,GAAG,CAAC;QAChB,cAAS,GAAG,GAAG,CAAC;QAChB,eAAU,GAAG,CAAC,CAAC,CAAC;QAChB,YAAO,GAAG,EAAE,CAAC;QAGjB,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACjD,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;SAClC;QACD,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAC7C,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;SAClC;QACD,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE;YAC3B,EAAE,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE;YAC3B,EAAE,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAC;IACP,CAAC;IACD,sBAAM,GAAN,UAAO,GAAG;QACN,OAAO,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,mBAAmB,GAAG,GAAG,CAAC,CAAC;IACjD,CAAC;IACD,uBAAO,GAAP,UAAQ,GAAG;QACP,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACnB,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE;YACtB,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACxC;QACD,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAC1E,CAAC;IACD,uBAAO,GAAP,UAAQ,GAAW;QACf,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,IAAI,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE;YACpB,IAAI,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SACtE;IACL,CAAC;IACD,4BAAY,GAAZ,UAAa,CAAS;QAClB,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,EAAE;YACtB,8CAA8C;YAC9C,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;SACtB;IACL,CAAC;IACM,4BAAY,GAAnB,UAAoB,CAAS,EAAE,KAAc;QACzC,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE;YACtB,IAAI,CAAC,GAAG,CAAC,EAAE;gBACP,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aAC1C;iBAAM;gBACH,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACzC;YACD,2DAA2D;SAC9D;QACD,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,IAAI,KAAK,EAAE;YAC/B,8CAA8C;YAC9C,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;YACnB,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;SAChD;IACL,CAAC;IACM,wBAAQ,GAAf;QACI,EAAE,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IAC9B,CAAC;IACM,yBAAS,GAAhB;QACI,EAAE,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;IAC/B,CAAC;IACM,oBAAI,GAAX;QACI,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACzD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAC7D,CAAC;IACL,YAAC;AAAD,CAtEA,AAsEC,IAAA;AAtEY,sBAAK","file":"","sourceRoot":"/","sourcesContent":["export class Audio {\r\n    private bgmVolume = 1.0;\r\n    private sfxVolume = 1.0;\r\n    private bgmAudioID = -1;\r\n    private playing = \"\";\r\n\r\n    public constructor() {\r\n        let t = cc.sys.localStorage.getItem(\"bgmVolume\");\r\n        if (t !== null || t !== undefined) {\r\n            this.bgmVolume = parseFloat(t);\r\n        }\r\n        t = cc.sys.localStorage.getItem(\"sfxVolume\");\r\n        if (t !== null || t !== undefined) {\r\n            this.sfxVolume = parseFloat(t);\r\n        }\r\n        cc.game.on(cc.game.EVENT_HIDE, function () {\r\n            cc.audioEngine.pauseAll();\r\n        });\r\n        cc.game.on(cc.game.EVENT_SHOW, function () {\r\n            cc.audioEngine.resumeAll();\r\n        });\r\n    }\r\n    getUrl(url): string {\r\n        return cc.url.raw(\"resources/sounds/\" + url);\r\n    }\r\n    playBGM(url) {\r\n        this.playing = url;\r\n        var audioUrl = this.getUrl(url);\r\n        if (this.bgmAudioID >= 0) {\r\n            cc.audioEngine.stop(this.bgmAudioID);\r\n        }\r\n        this.bgmAudioID = cc.audioEngine.play(audioUrl, true, this.bgmVolume);\r\n    }\r\n    playSFX(url: string) {\r\n        var audioUrl = this.getUrl(url);\r\n        if (this.sfxVolume > 0) {\r\n            var audioId = cc.audioEngine.play(audioUrl, false, this.sfxVolume);\r\n        }\r\n    }\r\n    setSFXVolume(v: number) {\r\n        if (this.sfxVolume !== v) {\r\n            // cc.sys.localStorage.setItem(\"sfxVolume\",v);\r\n            this.sfxVolume = v;\r\n        }\r\n    }\r\n    public setBGMVolume(v: number, force: boolean) {\r\n        if (this.bgmAudioID >= 0) {\r\n            if (v > 0) {\r\n                cc.audioEngine.resume(this.bgmAudioID);\r\n            } else {\r\n                cc.audioEngine.pause(this.bgmAudioID);\r\n            }\r\n            //cc.audioEngine.setVolume(this.bgmAudioID,this.bgmVolume);\r\n        }\r\n        if (this.bgmVolume !== v || force) {\r\n            // cc.sys.localStorage.setItem(\"bgmVolume\",v);\r\n            this.bgmVolume = v;\r\n            cc.audioEngine.setVolume(this.bgmAudioID, v);\r\n        }\r\n    }\r\n    public pauseAll() {\r\n        cc.audioEngine.pauseAll();\r\n    }\r\n    public resumeAll() {\r\n        cc.audioEngine.resumeAll();\r\n    }\r\n    public save() {\r\n        cc.sys.localStorage.setItem(\"sfxVolume\", this.sfxVolume);\r\n        cc.sys.localStorage.setItem(\"bgmVolume\", this.bgmVolume);\r\n    }\r\n}"]}